# 人为错误

人设计构建软件系统，人操作保证系统的运作，而人是容易犯错的，哪怕他们并不想犯错。在对某个互联网服务的调研中发现，导致服务停运的因素中，占比
最大的是操作者的配置错误，与此相比，服务器或网络的硬件错误占比仅为10-25%[[13]](README.md#b1_c1_13)。

如何构建一个可靠的系统，就算会有人为操作的失误，依然能够正常的运作？一个设计优秀的系统会有如下考量：

- 设计系统时减少犯错的机会。例如，好的抽象、API和管理接口会让开发正更有机会"做正确的事"，并提高犯错的成本。但是如果一个接口规范太多，开发
人员往往会无视它们带来的便利而绕开它们，这其实是个需要好好把握的微妙的平衡。

- 解耦软件的各个部分，使得人们通常会犯的错误不会直接导致失效。比如说，提供具有完整功能的*沙盒*环境，这个环境并不在生产环境中，人们可以安全
地进行探索和实验，能够用到真实的数据，但是不会影响到真实的系统用户。

- 从各个粒度进行完整的测试，包括单元测试到完整系统的集成测试，以及自动化无法覆盖到的手动测试[[3]](README.md#b1_c1_3)。值得一提的是，自
动化测试在业界被广泛应用，它们容易理解，也特别容易覆盖到一些平常用户操作很少触及的使用场景。

- 提供快捷、简单的恢复手段，使得人为错误带来的系统失效的影响降到最低。例如，能快速地回滚配置变更，能逐级发布新的代码（这样任何意料之外的
缺陷只会影响到有限的用户），能提供工具来重新提供计算（万一原有的计算是错误的）。

- 提供详细精确的监测，例如性能指标和错误频率。在其他的工程学科中这也会被称为*遥测*（原文*telemetry*，译者在EMC硬件部门工作过，在这个上下
文里，软件定期采集传感器读数用于监控服务器硬件健康状况，就称为*telemetry*）。监测数据能够在早期提供预警信号，并让我们了解提供了软件运行的
环境是否已经偏离了我们的假设和限制。另一方面，当问题真正发生的时候，监测指标在问题诊断时能提供巨大的价值。

- 提供好的管理实践和培训——这是一个复杂而又重要的方面，但在这本书的讨论范围之外。
